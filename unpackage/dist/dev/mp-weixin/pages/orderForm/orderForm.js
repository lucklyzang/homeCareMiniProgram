(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/orderForm/orderForm"],{222:function(e,t,r){"use strict";(function(e,t){var n=r(4);r(26);n(r(25));var o=n(r(223));e.__webpack_require_UNI_MP_PLUGIN__=r,t(o.default)}).call(this,r(1)["default"],r(2)["createPage"])},223:function(e,t,r){"use strict";r.r(t);var n=r(224),o=r(226);for(var a in o)["default"].indexOf(a)<0&&function(e){r.d(t,e,(function(){return o[e]}))}(a);r(229);var i,s=r(33),u=Object(s["default"])(o["default"],n["render"],n["staticRenderFns"],!1,null,null,null,!1,n["components"],i);u.options.__file="pages/orderForm/orderForm.vue",t["default"]=u.exports},224:function(e,t,r){"use strict";r.r(t);var n=r(225);r.d(t,"render",(function(){return n["render"]})),r.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]})),r.d(t,"recyclableRender",(function(){return n["recyclableRender"]})),r.d(t,"components",(function(){return n["components"]}))},225:function(e,t,r){"use strict";var n;r.r(t),r.d(t,"render",(function(){return o})),r.d(t,"staticRenderFns",(function(){return i})),r.d(t,"recyclableRender",(function(){return a})),r.d(t,"components",(function(){return n}));try{n={uModal:function(){return Promise.all([r.e("common/vendor"),r.e("node-modules/uview-ui/components/u-modal/u-modal")]).then(r.bind(null,538))},uTextarea:function(){return Promise.all([r.e("common/vendor"),r.e("node-modules/uview-ui/components/u-textarea/u-textarea")]).then(r.bind(null,693))},uToast:function(){return r.e("node-modules/uview-ui/components/u-toast/u-toast").then(r.bind(null,531))},uLoadingIcon:function(){return Promise.all([r.e("common/vendor"),r.e("node-modules/uview-ui/components/u-loading-icon/u-loading-icon")]).then(r.bind(null,572))},uTabs:function(){return Promise.all([r.e("common/vendor"),r.e("node-modules/uview-ui/components/u-tabs/u-tabs")]).then(r.bind(null,701))},uEmpty:function(){return Promise.all([r.e("common/vendor"),r.e("node-modules/uview-ui/components/u-empty/u-empty")]).then(r.bind(null,670))},uImage:function(){return Promise.all([r.e("common/vendor"),r.e("node-modules/uview-ui/components/u-image/u-image")]).then(r.bind(null,588))},uCountDown:function(){return Promise.all([r.e("common/vendor"),r.e("node-modules/uview-ui/components/u-count-down/u-count-down")]).then(r.bind(null,709))},uLoadmore:function(){return Promise.all([r.e("common/vendor"),r.e("node-modules/uview-ui/components/u-loadmore/u-loadmore")]).then(r.bind(null,678))}}}catch(s){if(-1===s.message.indexOf("Cannot find module")||-1===s.message.indexOf(".vue"))throw s;console.error(s.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var o=function(){var e=this,t=e.$createElement,r=(e._self._c,e.__map(e.fullTradeList,(function(t,r){var n=e.__get_orig(t),o=e.transitionOrderStatusText(t.workerStatus,t),a=e.getNowFormatDateText(t.serviceDate),i=e.judgeWeek(t.serviceDate);return{$orig:n,m0:o,m1:a,m2:i}}))),n=e.fullTradeList.length,o=e.__map(e.fullTradeList,(function(t,r){var n=e.__get_orig(t),o=e.transitionOrderStatusText(t.workerStatus,t),a=e.getNowFormatDateText(t.serviceDate),i=e.judgeWeek(t.serviceDate);return{$orig:n,m3:o,m4:a,m5:i}})),a=e.fullTradeList.length,i=e.__map(e.fullTradeList,(function(t,r){var n=e.__get_orig(t),o=e.transitionOrderStatusText(t.workerStatus,t),a=e.getNowFormatDateText(t.serviceDate),i=e.judgeWeek(t.serviceDate);return{$orig:n,m6:o,m7:a,m8:i}})),s=e.fullTradeList.length,u=e.__map(e.fullTradeList,(function(t,r){var n=e.__get_orig(t),o=e.transitionOrderStatusText(t.workerStatus,t),a=e.getNowFormatDateText(t.serviceDate),i=e.judgeWeek(t.serviceDate);return{$orig:n,m9:o,m10:a,m11:i}})),c=e.fullTradeList.length,d=e.__map(e.fullTradeList,(function(t,r){var n=e.__get_orig(t),o=e.transitionOrderStatusText(t.workerStatus,t),a=e.getNowFormatDateText(t.serviceDate),i=e.judgeWeek(t.serviceDate);return{$orig:n,m12:o,m13:a,m14:i}})),l=e.fullTradeList.length,m=e.__map(e.fullTradeList,(function(t,r){var n=e.__get_orig(t),o=e.transitionOrderStatusText(t.workerStatus,t),a=e.getNowFormatDateText(t.serviceDate),i=e.judgeWeek(t.serviceDate);return{$orig:n,m15:o,m16:a,m17:i}})),g=e.fullTradeList.length;e._isMounted||(e.e0=function(t){e.deleteShow=!1},e.e1=function(t){e.cancelOrderFormShow=!1},e.e2=function(t){e.applyRefundShow=!1},e.e3=function(t){e.applyRefundShow=!1},e.e4=function(t){e.quitPayShow=!1},e.e5=function(t){e.quitPayShow=!1},e.e6=function(t){e.remindSendOrdersShow=!1}),e.$mp.data=Object.assign({},{$root:{l0:r,g0:n,l1:o,g1:a,l2:i,g2:s,l3:u,g3:c,l4:d,g4:l,l5:m,g5:g}})},a=!1,i=[];o._withStripped=!0},226:function(e,t,r){"use strict";r.r(t);var n=r(227),o=r.n(n);for(var a in n)["default"].indexOf(a)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(a);t["default"]=o.a},227:function(e,t,r){"use strict";(function(e){var n=r(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(11)),a=r(30),i=r(36),s=r(228);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d=function(){r.e("components/zhouWei-navBar/index").then(function(){return resolve(r(686))}.bind(null,r)).catch(r.oe)},l={components:{navBar:d},data:function(){return{defaultPersonPhotoIconPng:r(219),infoText:"加载中···",showLoadingHint:!1,currentPageNum:1,pageSize:20,totalCount:0,status:"nomore",tradeList:[],fullTradeList:[],deleteShow:!1,haveDeleteShow:!1,cancelOrderFormShow:!1,quitPayShow:!1,applyRefundShow:!1,remindSendOrdersShow:!1,refundReason:"",deleteInfoContent:"删除订单不可恢复，如有疑问请联系客服人员资讯",haveDeleteInfoContent:"已删除订单",isShowNoData:!1,list:[{name:"全部",badge:{value:""}},{name:"待付款",badge:{value:""}},{name:"派单中",badge:{value:""}},{name:"服务中",badge:{value:""}},{name:"待评价",badge:{value:""}},{name:"取消|退款",badge:{value:""}}],current:0,currentSelectOrderMessage:{}}},computed:c(c({},(0,a.mapGetters)(["userInfo","editServiceOrderFormSureChooseMessage"])),{},{userName:function(){},proId:function(){}}),onShow:function(){this.editServiceOrderFormSureChooseMessage.hasOwnProperty("current")?(this.current=this.editServiceOrderFormSureChooseMessage.current,this.queryTradeOrderPage({pageNo:this.currentPageNum,pageSize:this.pageSize,status:this.transitionOrderStatus(this.editServiceOrderFormSureChooseMessage.current)},!0)):this.queryTradeOrderPage({pageNo:this.currentPageNum,pageSize:this.pageSize,status:""},!0)},methods:c(c({},(0,a.mapMutations)(["storeEditServiceOrderFormSureChooseMessage"])),{},{countDownFinishEvent:function(){console.log("结束")},getNowFormatDateText:function(e,t){var r,n=new Date(e).getDate(),o="月",a="日",i=new Date(e).getMonth()+1;new Date(e).getHours();return r=2==t?i+o:i+o+n+a,r},judgeWeek:function(e){var t=new Date(e),r=t.getDay();switch(r){case 0:return"周日";case 1:return"周一";case 2:return"周二";case 3:return"周三";case 4:return"周四";case 5:return"周五";case 6:return"周六"}},scrolltolower:function(){var e=Math.ceil(this.totalCount/this.pageSize);this.currentPageNum>=e?this.status="nomore":(this.status="loadmore",this.currentPageNum=this.currentPageNum+1,this.queryTradeOrderPage({pageNo:this.currentPageNum,pageSize:this.pageSize,status:this.transitionOrderStatus(this.current)},!1))},operateOrderSuccessSureEvent:function(){this.haveDeleteShow=!1},queryTradeOrderPage:function(e,t){var r=this;this.tradeList=[],this.list.forEach((function(e){return e["badge"]["value"]=0})),t?(this.fullTradeList=[],this.showLoadingHint=!0):(this.showLoadingHint=!1,this.infoText="",this.status="loading"),(0,s.getTradeOrderPage)(e).then((function(e){if(e&&0==e.data.code){var n=r.editServiceOrderFormSureChooseMessage;n["current"]=0,r.storeEditServiceOrderFormSureChooseMessage(n),r.totalCount=e.data.data.total,r.tradeList=e.data.data.list,e.data.data.list.length>0&&(4==r.current&&(r.tradeList=r.tradeList.filter((function(e){return 0==e.commentStatus}))),r.tradeList.forEach((function(e){e.payPrice=(0,i.fenToYuan)(e.payPrice),e.countTime=new Date(e.createTime).getTime()+9e5-(new Date).getTime()}))),r.fullTradeList=r.fullTradeList.concat(r.tradeList),r.list[r.current]["badge"]["value"]=r.fullTradeList.length,0==r.fullTradeList.length?r.isShowNoData=!0:r.isShowNoData=!1}else r.$refs.uToast.show({message:e.data.msg,type:"error",position:"bottom"});if(t)r.showLoadingHint=!1;else{var o=Math.ceil(r.totalCount/r.pageSize);r.currentPage>=o?r.status="nomore":r.status="loadmore"}})).catch((function(e){t?r.showLoadingHint=!1:r.status="loadmore",r.$refs.uToast.show({message:e.message,type:"error",position:"bottom"})}))},appointmentServiceEvent:function(t){var r=JSON.stringify(t);e.navigateTo({url:"/servicePackage/pages/reservationServiceList/reservationServiceList?transmitData="+r})},immediatePayEvent:function(t){var r=JSON.stringify(t),n=this.editServiceOrderFormSureChooseMessage;n["orderMessage"]=t,this.storeEditServiceOrderFormSureChooseMessage(n),e.navigateTo({url:"/orderFormPackage/pages/orderPay/orderPay?transmitData="+r})},cancelOrderPort:function(e,t){var r=this;this.infoText="订单取消中···",this.showLoadingHint=!0,(0,s.cancelOrder)(e,t).then((function(e){e&&0==e.data.code?(r.haveDeleteShow=!0,r.haveDeleteInfoContent="已取消订单",r.currentPageNum=1,r.totalCount=0,r.status="nomore",r.isShowNoData=!1,r.fullTradeList=[],r.queryTradeOrderPage({pageNo:r.currentPageNum,pageSize:r.pageSize,status:r.transitionOrderStatus(r.current)},!0)):r.$refs.uToast.show({message:e.data.msg,type:"error",position:"bottom"}),r.showLoadingHint=!1})).catch((function(e){r.showLoadingHint=!1,r.$refs.uToast.show({message:e.message,type:"error",position:"bottom"})}))},deleteOrderPort:function(e){var t=this;this.infoText="订单删除中···",this.showLoadingHint=!0,(0,s.deleteOrder)(e).then((function(e){e&&0==e.data.code?(t.haveDeleteShow=!0,t.haveDeleteInfoContent="已删除订单",t.currentPageNum=1,t.totalCount=0,t.status="nomore",t.isShowNoData=!1,t.fullTradeList=[],t.queryTradeOrderPage({pageNo:t.currentPageNum,pageSize:t.pageSize,status:t.transitionOrderStatus(t.current)},!0)):t.$refs.uToast.show({message:e.data.msg,type:"error",position:"bottom"}),t.showLoadingHint=!1})).catch((function(e){t.showLoadingHint=!1,t.$refs.uToast.show({message:e.message,type:"error",position:"bottom"})}))},reminderOrderPort:function(e){var t=this;this.infoText="派单提醒中···",this.showLoadingHint=!0,(0,s.reminderOrder)(e).then((function(e){e&&0==e.data.code?(t.remindSendOrdersShow=!0,t.currentPageNum=1,t.totalCount=0,t.status="nomore",t.isShowNoData=!1,t.fullTradeList=[],t.queryTradeOrderPage({pageNo:t.currentPageNum,pageSize:t.pageSize,status:t.transitionOrderStatus(t.current)},!0)):t.$refs.uToast.show({message:e.data.msg,type:"error",position:"bottom"}),t.showLoadingHint=!1})).catch((function(e){t.showLoadingHint=!1,t.$refs.uToast.show({message:e.message,type:"error",position:"bottom"})}))},change:function(e){this.current=e.index,this.currentPageNum=1,this.totalCount=0,this.status="nomore",this.isShowNoData=!1,this.fullTradeList=[],this.queryTradeOrderPage({pageNo:this.currentPageNum,pageSize:this.pageSize,status:this.transitionOrderStatus(this.current)},!0)},transitionOrderStatus:function(e){switch(e){case 0:return"";case 1:return 0;case 2:return 1;case 3:return 2;case 4:return 3;case 5:return 4}},transitionOrderStatusText:function(e,t){var r=e.toString(),n=t.status.toString();if(3==this.current)switch(n){case"30":return"待出发";case"40":return"待服务";case"50":return"服务中"}else switch(r){case"0":return"待支付";case"1":return"派单中";case"2":if("30"==n)return"待出发";if("40"==n)return"待服务";if("50"==n)return"服务中";break;case"3":return t.commentStatus?"已完成":"待评价";case"4":if(0==t.refundStatus)return"已取消";if(1==t.refundStatus)return"退款中";if(2==t.refundStatus)return"已退款";break}},deleteOrder:function(e){this.currentSelectOrderMessage=e,this.deleteShow=!0},deleteOrderSureEvent:function(){this.deleteShow=!1,this.deleteOrderPort(this.currentSelectOrderMessage.id)},remindSendOrdersEvent:function(e){this.currentSelectOrderMessage=e,this.reminderOrderPort(this.currentSelectOrderMessage.id)},cancelOrderEvent:function(e){this.currentSelectOrderMessage=e,this.cancelOrderFormShow=!0},cancelOrderSureEvent:function(){this.cancelOrderFormShow=!1,this.cancelOrderPort(this.currentSelectOrderMessage.id,"")},orderFormEvaluateEvent:function(t){var r=JSON.stringify(t);e.navigateTo({url:"/orderFormPackage/pages/serviceEvaluate/serviceEvaluate?transmitData="+r})},editOrderFormEvent:function(t){var r=this.editServiceOrderFormSureChooseMessage;r["orderMessage"]=t,this.storeEditServiceOrderFormSureChooseMessage(r),e.navigateTo({url:"/orderFormPackage/pages/orderFormEdit/orderFormEdit"})},enterOrderDetailsEvent:function(t){this.currentPageNum=1,this.totalCount=0;var r=this.editServiceOrderFormSureChooseMessage;r["orderMessage"]=t,r["current"]=this.current,this.storeEditServiceOrderFormSureChooseMessage(r),e.navigateTo({url:"/orderFormPackage/pages/orderFormDetails/orderFormDetails"})}})};t.default=l}).call(this,r(2)["default"])},229:function(e,t,r){"use strict";r.r(t);var n=r(230),o=r.n(n);for(var a in n)["default"].indexOf(a)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(a);t["default"]=o.a},230:function(e,t,r){}},[[222,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/orderForm/orderForm.js.map