(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{194:function(e,o,t){"use strict";(function(e,o){var s=t(4);t(26);s(t(25));var n=s(t(195));e.__webpack_require_UNI_MP_PLUGIN__=t,o(n.default)}).call(this,t(1)["default"],t(2)["createPage"])},195:function(e,o,t){"use strict";t.r(o);var s=t(196),n=t(198);for(var i in n)["default"].indexOf(i)<0&&function(e){t.d(o,e,(function(){return n[e]}))}(i);t(203);var r,a=t(33),c=Object(a["default"])(n["default"],s["render"],s["staticRenderFns"],!1,null,null,null,!1,s["components"],r);c.options.__file="pages/login/login.vue",o["default"]=c.exports},196:function(e,o,t){"use strict";t.r(o);var s=t(197);t.d(o,"render",(function(){return s["render"]})),t.d(o,"staticRenderFns",(function(){return s["staticRenderFns"]})),t.d(o,"recyclableRender",(function(){return s["recyclableRender"]})),t.d(o,"components",(function(){return s["components"]}))},197:function(e,o,t){"use strict";var s;t.r(o),t.d(o,"render",(function(){return n})),t.d(o,"staticRenderFns",(function(){return r})),t.d(o,"recyclableRender",(function(){return i})),t.d(o,"components",(function(){return s}));try{s={uPopup:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-popup/u-popup")]).then(t.bind(null,538))},uIcon:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-icon/u-icon")]).then(t.bind(null,588))},uToast:function(){return t.e("node-modules/uview-ui/components/u-toast/u-toast").then(t.bind(null,531))},uModal:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-modal/u-modal")]).then(t.bind(null,605))},uForm:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-form/u-form")]).then(t.bind(null,613))},uFormItem:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-form-item/u-form-item")]).then(t.bind(null,622))},uInput:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-input/u-input")]).then(t.bind(null,630))},uCheckboxGroup:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-checkbox-group/u-checkbox-group")]).then(t.bind(null,638))},uCheckbox:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-checkbox/u-checkbox")]).then(t.bind(null,646))},uDivider:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-divider/u-divider")]).then(t.bind(null,654))}}}catch(a){if(-1===a.message.indexOf("Cannot find module")||-1===a.message.indexOf(".vue"))throw a;console.error(a.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var n=function(){var e=this,o=e.$createElement,t=(e._self._c,e.isSetPassword?null:{"font-size":"12px",color:"#B5B5B5"});e.$mp.data=Object.assign({},{$root:{a0:t}})},i=!1,r=[];n._withStripped=!0},198:function(e,o,t){"use strict";t.r(o);var s=t(199),n=t.n(s);for(var i in s)["default"].indexOf(i)<0&&function(e){t.d(o,e,(function(){return s[e]}))}(i);o["default"]=n.a},199:function(e,o,t){"use strict";(function(e,s){var n=t(4);Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i=n(t(11)),r=t(30),a=t(200),c=t(36);function d(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);o&&(s=s.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),t.push.apply(t,s)}return t}function u(e){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{};o%2?d(Object(t),!0).forEach((function(o){(0,i.default)(e,o,t[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))}))}return e}var h={components:{},data:function(){return{loginBackgroundPng:t(201),logoSmallIcon:t(202),noClick:!0,userCode:"",checkboxList:[{name:"阅读并同意协议",disabled:!1}],form:{username:"",password:"",verificationCode:"",newPassword:"",againPassword:""},familyMemberList:[],initValue:"",fullFamilyMemberList:[],showGetVerificationCode:!0,isSetPassword:!1,isPasswordLogin:!1,isForgetPassword:!1,count:"",privacyPolicyBoxShow:!1,weixinAuthorizationInfoBoxShow:!1,timer:null,isClickGetCode:!1,isReadAgreeChecked:["阅读并同意协议"],showLoadingHint:!1,modalShow:!1,modalContent:""}},onShow:function(){},onHide:function(){},destroyed:function(){},computed:u({},(0,r.mapGetters)(["userInfo"])),mounted:function(){this.form.username=(0,c.getCache)("userName")?(0,c.getCache)("userName"):"",this.form.password=(0,c.getCache)("userPassword")?(0,c.getCache)("userPassword"):""},methods:u(u({},(0,r.mapMutations)(["storeUserInfo","changeOverDueWay","changeToken","changeIsLogin","changeNurseRankDictData"])),{},{backTo:function(){this.isForgetPassword?(this.isPasswordLogin=!0,this.isSetPassword=!1,this.isForgetPassword=!1,this.form.verificationCode=""):this.isSetPassword&&(this.isPasswordLogin=!1,this.isSetPassword=!1,this.isForgetPassword=!1,this.form.verificationCode="")},blurEvent:function(e){if(e){var o=/^[1][3,4,5,6,7,8,9][0-9]{9}$/;o.test(e)||this.$refs.uToast.show({message:"请输入正确的手机号!",type:"error",position:"bottom"})}},loginMethodEvent:function(){this.isPasswordLogin=!this.isPasswordLogin,this.form.username="",this.form.password="",this.form.verificationCode=""},forgetPasswordEvent:function(){this.isSetPassword=!1,this.isForgetPassword=!0,this.form.username="",this.form.password="",this.form.verificationCode="",this.form.newPassword="",this.showGetVerificationCode=!0,clearInterval(this.timer),this.timer=null},getVerificationCodeEvent:function(){var e=this;if(this.form.username){var o=/^[1][3,4,5,6,7,8,9][0-9]{9}$/;if(o.test(this.form.username)){var t=60;this.timer||(this.count=t,this.showGetVerificationCode=!1,this.timer=setInterval((function(){e.count>0&&e.count<=t?e.count--:(e.showGetVerificationCode=!0,clearInterval(e.timer),e.timer=null)}),1e3),this.isClickGetCode=!0,this.sendCodeEvent())}else this.$refs.uToast.show({message:"请输入正确的手机号!",type:"error",position:"bottom"})}else this.$refs.uToast.show({message:"请输入手机号码!",type:"error",position:"bottom"})},quitEvent:function(){e.exitMiniProgram({success:function(){}}),this.privacyPolicyBoxShow=!1},agreeContinueEvent:function(){this.privacyPolicyBoxShow=!1},sure:function(){this.isPasswordLogin?this.accountLogin():this.codeLogin()},accountLogin:function(){var e=this;if(!this.showLoadingHint)if(this.form.username){var o=/^[1][3,4,5,6,7,8,9][0-9]{9}$/;if(o.test(this.form.username))if(this.form.password)if(0!=this.isReadAgreeChecked.length){var t={mobile:this.form.username,password:this.form.password,loginType:0};this.showLoadingHint=!0,(0,a.logIn)(t).then((function(o){o&&0==o.data.code?(e.changeOverDueWay(!1),(0,c.setCache)("storeOverDueWay",!1),(0,c.setCache)("isLogin",!0),e.changeToken(o.data.data.accessToken),e.storeUserInfo(o.data.data),e.changeIsLogin(!0),s.switchTab({url:"/pages/index/index"}),e.getUserDictDataEvent()):(e.modalShow=!0,e.modalContent=o.data.msg),e.showLoadingHint=!1})).catch((function(o){e.showLoadingHint=!1,e.modalShow=!0,e.modalContent="".concat(o)}))}else this.$refs.uToast.show({message:"请阅读并同意协议!",type:"error",position:"bottom"});else this.$refs.uToast.show({message:"请输入密码",type:"error",position:"bottom"});else this.$refs.uToast.show({message:"请输入正确的手机号!",type:"error",position:"bottom"})}else this.$refs.uToast.show({message:"请输入手机号",type:"error",position:"bottom"})},weixinMiniAppLoginEvent:function(e){var o=this;this.showLoadingHint=!0,this.loadingText="登录中...",(0,a.weixinMiniAppLogin)(e).then((function(e){o.showLoadingHint=!1,e&&0==e.data.code?(o.changeOverDueWay(!1),(0,c.setCache)("storeOverDueWay",!1),(0,c.setCache)("isLogin",!0),o.changeToken(e.data.data.accessToken),o.storeUserInfo(e.data.data),o.changeIsLogin(!0),s.switchTab({url:"/pages/index/index"}),o.getUserDictDataEvent()):(o.modalShow=!0,o.modalContent=e.data.msg)})).catch((function(e){o.showLoadingHint=!1,o.modalShow=!0,o.modalContent="".concat(e)}))},codeLogin:function(){var e=this;if(!this.showLoadingHint)if(this.form.username){var o=/^[1][3,4,5,6,7,8,9][0-9]{9}$/;if(o.test(this.form.username))if(this.form.verificationCode)if(0!=this.isReadAgreeChecked.length){var t={mobile:this.form.username,code:this.form.verificationCode,loginType:0};this.showLoadingHint=!0,(0,a.logInByCode)(t).then((function(o){o&&0==o.data.code?(e.changeOverDueWay(!1),(0,c.setCache)("storeOverDueWay",!1),(0,c.setCache)("isLogin",!0),e.changeToken(o.data.data.accessToken),e.storeUserInfo(o.data.data),e.isPasswordLogin||(o.data.data.first?(e.isSetPassword=!0,e.form.password=""):(e.changeIsLogin(!0),s.switchTab({url:"/pages/index/index"}),e.getUserDictDataEvent()))):(e.modalShow=!0,e.modalContent=o.data.msg),e.showLoadingHint=!1})).catch((function(o){e.showLoadingHint=!1,e.modalShow=!0,e.modalContent="".concat(o)}))}else this.$refs.uToast.show({message:"请阅读并同意协议!",type:"error",position:"bottom"});else this.$refs.uToast.show({message:"请输入验证码",type:"error",position:"bottom"});else this.$refs.uToast.show({message:"请输入正确的手机号!",type:"error",position:"bottom"})}else this.$refs.uToast.show({message:"请输入手机号",type:"error",position:"bottom"})},sendCodeEvent:function(){var e=this;if(this.form.username){var o=/^[1][3,4,5,6,7,8,9][0-9]{9}$/;if(o.test(this.form.username)){var t={mobile:this.form.username,scene:this.isForgetPassword?4:1};this.showLoadingHint=!0,(0,a.sendPhoneCode)(t).then((function(o){o&&0==o.data.code?1==o.data.data?e.$refs.uToast.show({message:"验证码已发送至您的手机，请查收!",type:"success",position:"bottom"}):e.$refs.uToast.show({message:o.data.msg,type:"error",position:"bottom"}):(e.modalShow=!0,e.modalContent=o.data.msg),e.isClickGetCode=!1,e.showLoadingHint=!1})).catch((function(o){e.isClickGetCode=!1,e.showLoadingHint=!1,e.modalShow=!0,e.modalContent="".concat(o)}))}else this.$refs.uToast.show({message:"请输入正确的手机号!",type:"error",position:"bottom"})}else this.$refs.uToast.show({message:"请输入手机号",type:"erroe",position:"bottom"})},skipEvent:function(){s.switchTab({url:"/pages/index/index"}),this.getUserDictDataEvent()},resetPasswordEvent:function(){var e=this;if(!this.showLoadingHint)if(this.isForgetPassword){if(!this.form.username)return void this.$refs.uToast.show({message:"请输入手机号",type:"error",position:"bottom"});var o=/^[1][3,4,5,6,7,8,9][0-9]{9}$/;if(!o.test(this.form.username))return void this.$refs.uToast.show({message:"请输入正确的手机号!",type:"error",position:"bottom"});if(!this.form.verificationCode)return void this.$refs.uToast.show({message:"请输入验证码",type:"error",position:"bottom"});if(this.form.newPassword!=this.form.againPassword)return void this.$refs.uToast.show({message:"两次密码输入不一致!",type:"error",position:"bottom"});var t={password:this.form.newPassword,code:this.form.verificationCode,type:0,mobile:this.form.username};this.showLoadingHint=!0,(0,a.resetPassword)(t).then((function(o){o&&0==o.data.code?(e.$refs.uToast.show({message:"密码重置成功!",type:"success",position:"bottom"}),e.form={username:"",password:"",verificationCode:"",newPassword:"",againPassword:""},e.showGetVerificationCode=!0,e.isSetPassword=!1,e.isPasswordLogin=!0,e.isForgetPassword=!1):(e.modalShow=!0,e.modalContent="".concat(o.data.msg)),e.showLoadingHint=!1})).catch((function(o){e.showLoadingHint=!1,e.modalShow=!0,e.modalContent="".concat(o)}))}else{if(!this.form.password)return void this.$refs.uToast.show({message:"请输入密码",type:"error",position:"bottom"});if(!this.isPasswordLogin&&this.isSetPassword){this.showLoadingHint=!0;var n={password:this.form.password};this.showLoadingHint=!0,(0,a.setPassword)(n).then((function(o){!o||0!=o.data.code&&401!=o.data.code?(e.modalShow=!0,e.modalContent="".concat(o.data.msg)):(e.$refs.uToast.show({message:"密码设置成功!",type:"success",position:"bottom"}),e.changeIsLogin(!0),s.switchTab({url:"/pages/index/index"}),e.getUserDictDataEvent()),e.showLoadingHint=!1})).catch((function(o){e.showLoadingHint=!1,e.modalShow=!0,e.modalContent="".concat(o)}))}}},weixinLoginEvent:function(){var e=this;s.login({provider:"weixin",success:function(o){e.userCode=o.code}})},bindPhone:function(e){console.log(e),e.detail.code?this.weixinMiniAppLoginEvent({phoneCode:e.detail.code,loginCode:this.userCode,loginType:0}):this.$refs.uToast.show({message:"".concat(e.detail.errMsg),type:"error",position:"bottom"})},getUserDictDataEvent:function(){var e=this;(0,a.getUserDictData)({type:"technical_title"}).then((function(o){o&&0==o.data.code&&e.changeNurseRankDictData(o.data.data)})).catch((function(e){}))},sureCancel:function(){this.modalShow=!1},cancelSure:function(){this.modalShow=!1}})};o.default=h}).call(this,t(1)["default"],t(2)["default"])},203:function(e,o,t){"use strict";t.r(o);var s=t(204),n=t.n(s);for(var i in s)["default"].indexOf(i)<0&&function(e){t.d(o,e,(function(){return s[e]}))}(i);o["default"]=n.a},204:function(e,o,t){}},[[194,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/login/login.js.map