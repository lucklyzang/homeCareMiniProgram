(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{194:function(o,e,t){"use strict";(function(o,e){var n=t(4);t(26);n(t(25));var s=n(t(195));o.__webpack_require_UNI_MP_PLUGIN__=t,e(s.default)}).call(this,t(1)["default"],t(2)["createPage"])},195:function(o,e,t){"use strict";t.r(e);var n=t(196),s=t(198);for(var i in s)["default"].indexOf(i)<0&&function(o){t.d(e,o,(function(){return s[o]}))}(i);t(203);var r,a=t(33),c=Object(a["default"])(s["default"],n["render"],n["staticRenderFns"],!1,null,null,null,!1,n["components"],r);c.options.__file="pages/login/login.vue",e["default"]=c.exports},196:function(o,e,t){"use strict";t.r(e);var n=t(197);t.d(e,"render",(function(){return n["render"]})),t.d(e,"staticRenderFns",(function(){return n["staticRenderFns"]})),t.d(e,"recyclableRender",(function(){return n["recyclableRender"]})),t.d(e,"components",(function(){return n["components"]}))},197:function(o,e,t){"use strict";var n;t.r(e),t.d(e,"render",(function(){return s})),t.d(e,"staticRenderFns",(function(){return r})),t.d(e,"recyclableRender",(function(){return i})),t.d(e,"components",(function(){return n}));try{n={uPopup:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-popup/u-popup")]).then(t.bind(null,506))},uIcon:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-icon/u-icon")]).then(t.bind(null,556))},uToast:function(){return t.e("node-modules/uview-ui/components/u-toast/u-toast").then(t.bind(null,499))},uModal:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-modal/u-modal")]).then(t.bind(null,573))},uForm:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-form/u-form")]).then(t.bind(null,581))},uFormItem:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-form-item/u-form-item")]).then(t.bind(null,590))},uInput:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-input/u-input")]).then(t.bind(null,598))},uCheckboxGroup:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-checkbox-group/u-checkbox-group")]).then(t.bind(null,606))},uCheckbox:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-checkbox/u-checkbox")]).then(t.bind(null,614))},uDivider:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-divider/u-divider")]).then(t.bind(null,622))}}}catch(a){if(-1===a.message.indexOf("Cannot find module")||-1===a.message.indexOf(".vue"))throw a;console.error(a.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var s=function(){var o=this,e=o.$createElement,t=(o._self._c,o.isSetPassword?null:{"font-size":"12px",color:"#B5B5B5"});o.$mp.data=Object.assign({},{$root:{a0:t}})},i=!1,r=[];s._withStripped=!0},198:function(o,e,t){"use strict";t.r(e);var n=t(199),s=t.n(n);for(var i in n)["default"].indexOf(i)<0&&function(o){t.d(e,o,(function(){return n[o]}))}(i);e["default"]=s.a},199:function(o,e,t){"use strict";(function(o,n){var s=t(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s(t(11)),r=t(30),a=t(200),c=t(36);function d(o,e){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),t.push.apply(t,n)}return t}function u(o){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?d(Object(t),!0).forEach((function(e){(0,i.default)(o,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(t,e))}))}return o}var h={components:{},data:function(){return{loginBackgroundPng:t(201),logoSmallIcon:t(202),noClick:!0,userCode:"",checkboxList:[{name:"阅读并同意协议",disabled:!1}],form:{username:"",password:"",verificationCode:"",newPassword:"",againPassword:""},familyMemberList:[],initValue:"",fullFamilyMemberList:[],showGetVerificationCode:!0,isSetPassword:!1,isPasswordLogin:!0,isForgetPassword:!1,count:"",privacyPolicyBoxShow:!0,weixinAuthorizationInfoBoxShow:!1,timer:null,isClickGetCode:!1,isReadAgreeChecked:[],showLoadingHint:!1,modalShow:!1,modalContent:""}},onShow:function(){},onHide:function(){},destroyed:function(){},computed:u({},(0,r.mapGetters)(["userInfo"])),mounted:function(){this.form.username=(0,c.getCache)("userName")?(0,c.getCache)("userName"):"",this.form.password=(0,c.getCache)("userPassword")?(0,c.getCache)("userPassword"):""},methods:u(u({},(0,r.mapMutations)(["storeUserInfo","changeOverDueWay","changeToken","changeIsLogin","changeNurseRankDictData"])),{},{backTo:function(){this.isForgetPassword?(this.isPasswordLogin=!0,this.isSetPassword=!1,this.isForgetPassword=!1,this.form.verificationCode=""):this.isSetPassword&&(this.isPasswordLogin=!1,this.isSetPassword=!1,this.isForgetPassword=!1,this.form.verificationCode="")},blurEvent:function(o){if(o){var e=/^[1][3,4,5,6,7,8,9][0-9]{9}$/;e.test(o)||this.$refs.uToast.show({message:"手机号格式有误,请重新输入!",type:"error",position:"bottom"})}},loginMethodEvent:function(){this.isPasswordLogin=!this.isPasswordLogin,this.form.username="",this.form.password="",this.form.verificationCode=""},forgetPasswordEvent:function(){this.isSetPassword=!1,this.isForgetPassword=!0,this.form.username="",this.form.password="",this.form.verificationCode="",this.form.newPassword=""},getVerificationCodeEvent:function(){var o=this;if(this.form.username){var e=/^[1][3,4,5,6,7,8,9][0-9]{9}$/;if(e.test(this.form.username)){var t=60;this.timer||(this.count=t,this.showGetVerificationCode=!1,this.timer=setInterval((function(){o.count>0&&o.count<=t?o.count--:(o.showGetVerificationCode=!0,clearInterval(o.timer),o.timer=null)}),1e3),this.isClickGetCode=!0,this.sendCodeEvent())}else this.$refs.uToast.show({message:"手机号格式有误,请重新输入!",type:"error",position:"bottom"})}else this.$refs.uToast.show({message:"请输入手机号码!",type:"error",position:"bottom"})},quitEvent:function(){o.exitMiniProgram({success:function(){}}),this.privacyPolicyBoxShow=!1},agreeContinueEvent:function(){this.privacyPolicyBoxShow=!1},sure:function(){this.isPasswordLogin?this.accountLogin():this.codeLogin()},accountLogin:function(){var o=this;if(!this.showLoadingHint)if(this.form.username)if(this.form.password)if(0!=this.isReadAgreeChecked.length){var e={mobile:this.form.username,password:this.form.password,loginType:0};this.showLoadingHint=!0,(0,a.logIn)(e).then((function(e){e&&0==e.data.code?(o.changeOverDueWay(!1),(0,c.setCache)("storeOverDueWay",!1),(0,c.setCache)("isLogin",!0),o.changeToken(e.data.data.accessToken),o.storeUserInfo(e.data.data),o.changeIsLogin(!0),n.switchTab({url:"/pages/index/index"}),o.getUserDictDataEvent()):(o.modalShow=!0,o.modalContent=e.data.msg),o.showLoadingHint=!1})).catch((function(e){o.showLoadingHint=!1,o.modalShow=!0,o.modalContent="".concat(e)}))}else this.$refs.uToast.show({message:"请阅读并同意协议!",type:"error",position:"bottom"});else this.$refs.uToast.show({message:"请输入密码",type:"error",position:"bottom"});else this.$refs.uToast.show({message:"请输入手机号",type:"error",position:"bottom"})},weixinMiniAppLoginEvent:function(o){var e=this;this.showLoadingHint=!0,this.loadingText="登录中...",(0,a.weixinMiniAppLogin)(o).then((function(o){e.showLoadingHint=!1,o&&0==o.data.code?(e.changeOverDueWay(!1),(0,c.setCache)("storeOverDueWay",!1),(0,c.setCache)("isLogin",!0),e.changeToken(o.data.data.accessToken),e.storeUserInfo(o.data.data),e.changeIsLogin(!0),n.switchTab({url:"/pages/index/index"}),e.getUserDictDataEvent()):(e.modalShow=!0,e.modalContent=o.data.msg)})).catch((function(o){e.showLoadingHint=!1,e.modalShow=!0,e.modalContent="".concat(o)}))},codeLogin:function(){var o=this;if(!this.showLoadingHint)if(this.form.username)if(this.form.verificationCode)if(0!=this.isReadAgreeChecked.length){var e={mobile:this.form.username,code:this.form.verificationCode,loginType:0};this.showLoadingHint=!0,(0,a.logInByCode)(e).then((function(e){e&&0==e.data.code?(o.changeOverDueWay(!1),(0,c.setCache)("storeOverDueWay",!1),(0,c.setCache)("isLogin",!0),o.changeToken(e.data.data.accessToken),o.storeUserInfo(e.data.data),o.isPasswordLogin||(e.data.data.first?(o.isSetPassword=!0,o.form.password=""):(o.changeIsLogin(!0),n.switchTab({url:"/pages/index/index"}),o.getUserDictDataEvent()))):(o.modalShow=!0,o.modalContent=e.data.msg),o.showLoadingHint=!1})).catch((function(e){o.showLoadingHint=!1,o.modalShow=!0,o.modalContent="".concat(e)}))}else this.$refs.uToast.show({message:"请阅读并同意协议!",type:"error",position:"bottom"});else this.$refs.uToast.show({message:"请输入验证码",type:"error",position:"bottom"});else this.$refs.uToast.show({message:"请输入手机号",type:"error",position:"bottom"})},sendCodeEvent:function(){var o=this;if(this.form.username){var e={mobile:this.form.username,scene:this.isForgetPassword?4:1};this.showLoadingHint=!0,(0,a.sendPhoneCode)(e).then((function(e){e&&0==e.data.code?1==e.data.data?o.$refs.uToast.show({message:"发送成功!",type:"success",position:"bottom"}):o.$refs.uToast.show({message:e.data.msg,type:"error",position:"bottom"}):(o.modalShow=!0,o.modalContent=e.data.msg),o.isClickGetCode=!1,o.showLoadingHint=!1})).catch((function(e){o.isClickGetCode=!1,o.showLoadingHint=!1,o.modalShow=!0,o.modalContent="".concat(e)}))}else this.$refs.uToast.show({message:"请输入手机号",type:"erroe",position:"bottom"})},skipEvent:function(){n.switchTab({url:"/pages/index/index"}),this.getUserDictDataEvent()},resetPasswordEvent:function(){var o=this;if(!this.showLoadingHint)if(this.isForgetPassword){if(!this.form.username)return void this.$refs.uToast.show({message:"请输入手机号",type:"error",position:"bottom"});if(!this.form.verificationCode)return void this.$refs.uToast.show({message:"请输入验证码",type:"error",position:"bottom"});if(this.form.newPassword!=this.form.againPassword)return void this.$refs.uToast.show({message:"两次密码输入不一致!",type:"error",position:"bottom"});var e={password:this.form.newPassword,code:this.form.verificationCode,mobile:this.form.username};this.showLoadingHint=!0,(0,a.resetPassword)(e).then((function(e){e&&0==e.data.code?(o.$refs.uToast.show({message:"密码重置成功!",type:"success",position:"bottom"}),o.form={username:"",password:"",verificationCode:"",newPassword:"",againPassword:""},o.showGetVerificationCode=!0,o.isSetPassword=!1,o.isPasswordLogin=!0,o.isForgetPassword=!1):(o.modalShow=!0,o.modalContent="".concat(e.data.msg)),o.showLoadingHint=!1})).catch((function(e){o.showLoadingHint=!1,o.modalShow=!0,o.modalContent="".concat(e)}))}else{if(!this.form.password)return void this.$refs.uToast.show({message:"请输入密码",type:"error",position:"bottom"});if(!this.isPasswordLogin&&this.isSetPassword){this.showLoadingHint=!0;var t={password:this.form.password};this.showLoadingHint=!0,(0,a.setPassword)(t).then((function(e){!e||0!=e.data.code&&401!=e.data.code?(o.modalShow=!0,o.modalContent="".concat(e.data.msg)):(o.$refs.uToast.show({message:"密码设置成功!",type:"success",position:"bottom"}),o.changeIsLogin(!0),n.switchTab({url:"/pages/index/index"}),o.getUserDictDataEvent()),o.showLoadingHint=!1})).catch((function(e){o.showLoadingHint=!1,o.modalShow=!0,o.modalContent="".concat(e)}))}}},weixinLoginEvent:function(){var o=this;n.login({provider:"weixin",success:function(e){o.userCode=e.code}})},bindPhone:function(o){console.log(o),o.detail.code?this.weixinMiniAppLoginEvent({phoneCode:o.detail.code,loginCode:this.userCode,loginType:0}):this.$refs.uToast.show({message:"".concat(o.detail.errMsg),type:"error",position:"bottom"})},getUserDictDataEvent:function(){var o=this;(0,a.getUserDictData)({type:"technical_title"}).then((function(e){e&&0==e.data.code&&o.changeNurseRankDictData(e.data.data)})).catch((function(o){}))},sureCancel:function(){this.modalShow=!1},cancelSure:function(){this.modalShow=!1}})};e.default=h}).call(this,t(1)["default"],t(2)["default"])},203:function(o,e,t){"use strict";t.r(e);var n=t(204),s=t.n(n);for(var i in n)["default"].indexOf(i)<0&&function(o){t.d(e,o,(function(){return n[o]}))}(i);e["default"]=s.a},204:function(o,e,t){}},[[194,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/login/login.js.map